{"version":3,"file":"js/OrderList.91ffd9ae.js","mappings":"2KACSA,MAAM,U,mBAMFA,MAAM,iB,0EANfC,EAAAA,EAAAA,IASI,MATJ,EASI,gBARJA,EAAAA,EAAAA,IAOSC,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IAPyCC,EAAAA,YAAU,CAAzBC,EAAKC,M,WAAxCL,EAAAA,EAAAA,IAOS,QAPHD,OAAK,SAAC,eAAc,wCAC6BM,IAAUC,EAAAA,gBAChEC,IAAKH,EAAKI,MAFX,EAGEC,EAAAA,EAAAA,IAGcC,EAAA,CAHAC,GAAIP,EAAKO,IAAvB,C,kBACE,IAA+C,EAA/CC,EAAAA,EAAAA,GAA+C,OAA1Cb,MAAM,WAAWc,UAAQT,EAAKI,MAAnC,WACAI,EAAAA,EAAAA,GAA8C,MAA9C,GAA8CE,EAAAA,EAAAA,IAAjBV,EAAKW,MAAI,M,KAFxC,cAHF,cAYJ,OACIC,KAAK,SACLC,MAAM,CAAC,gBACPC,QACI,MAAMC,EAAW,CACb,CAACX,KAAK,WAAWO,KAAK,KAAKJ,GAAG,CAACK,KAAK,SACpC,CAACR,KAAK,WAAWO,KAAK,MAAMJ,GAAG,CAACK,KAAK,aACrC,CAACR,KAAK,WAAWO,KAAK,KAAKJ,GAAG,CAACK,KAAK,cACpC,CAACR,KAAK,WAAWO,KAAK,KAAKJ,GAAG,CAACK,KAAK,YAExC,MAAO,CAAEG,WAAAA,K,QCjBjB,MAAMC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF,S,yJCRStB,MAAM,W,UACXa,EAAAA,EAAAA,GAA6B,OAAxBb,MAAM,SAAQ,QAAI,K,GAClBA,MAAM,U,GAEFA,MAAM,gB,GAEHA,MAAM,iB,GAETA,MAAM,kB,GACJA,MAAM,uB,aAKNA,MAAM,e,GACJA,MAAM,sB,GACNA,MAAM,sB,yFAhBnBa,EAAAA,EAAAA,GAqBI,MArBJ,EAqBI,CApBJU,GACAV,EAAAA,EAAAA,GAkBM,MAlBN,EAkBM,gBAjBJZ,EAAAA,EAAAA,IAgBMC,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IAhBoCC,EAAAA,MAAI,CAAnBC,EAAKC,M,WAAhCL,EAAAA,EAAAA,IAgBM,OAhBDD,MAAM,QAAsCQ,IAAKF,GAAtD,EACEO,EAAAA,EAAAA,GAGM,MAHN,EAGM,mBAFFR,EAAKmB,UAAU,IACjB,IAAAX,EAAAA,EAAAA,GAAkE,OAAlE,GAAkEE,EAAAA,EAAAA,IAApCV,EAAKoB,WAAU,mBAE/CZ,EAAAA,EAAAA,GAUM,MAVN,EAUM,EATJA,EAAAA,EAAAA,GAIM,MAJN,EAIM,gBAHJZ,EAAAA,EAAAA,IAEWC,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IAFgCE,EAAKqB,UAAQ,CAAtCC,EAAUC,M,6BAAoCA,GAAU,CACDA,GAAU,eAA9E3B,EAAAA,EAAAA,IAAoF,O,MAA/ED,MAAM,sBAAuB6B,IAAKF,EAAUG,QAAQC,KAAzD,4BADqE,OAA1E,SAIFlB,EAAAA,EAAAA,GAGM,MAHN,EAGM,EAFJA,EAAAA,EAAAA,GAAmE,MAAnE,EAAgC,KAACE,EAAAA,EAAAA,IAAEV,EAAKqB,SAASM,YAAU,IAC3DnB,EAAAA,EAAAA,GAAoE,MAApE,EAAgC,KAACE,EAAAA,EAAAA,IAAEV,EAAKqB,SAASO,YAAY,IAAC,YAbpE,WAmBJvB,EAAAA,EAAAA,IAA2BwB,EAAA,CAAlBC,aAAc,KAAvB,I,kCAOF,MAAMC,EAAmB,KACxB,MAAMC,GAAKC,EAAAA,EAAAA,IAAS,CAACC,KAAK,KACbC,EAAcC,UAChB,MAAMC,QAAaC,EAAAA,EAAAA,GAAI,cACvB,GAAmB,IAAhBD,GAAQE,OAAWF,GAAQL,MAAMQ,OACpC,CACI,MAAMC,EAAUJ,EAAOL,KACvB,IAAI,IAAIU,KAAKD,EACb,CAEI,MAAMpB,EAASoB,EAAUC,GAAGrB,UAAU,GACtC,IAAIM,EAAW,EACXC,EAAW,EACf,IAAI,IAAIe,KAAKtB,EAETO,GAAaP,EAASsB,IAAIC,YAAY,EACtCjB,GAAcN,EAASsB,IAAIlB,SAASoB,MAAMxB,EAASsB,IAAIC,YAAa,EAExEvB,EAASM,WAAWA,EACpBN,EAASO,WAAWA,EAExBI,EAAKE,KAAKG,EAAOL,OAGzBG,IACA,MAAM,KAACD,IAAMY,EAAAA,EAAAA,IAAOd,GACpB,MAAO,CAAEE,KAAAA,IAEjB,OACEa,WAAY,CAAEC,OAAMA,EAAAA,GAClBpC,KAAK,YACLE,QACG,MAAM,KAACoB,GAAOH,IAEd,OADAkB,QAAQC,IAAIhB,GACL,CAACA,KAAAA,K,QCzDf,MAAMlB,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF","sources":["webpack://daojia/./src/views/home/Docker.vue","webpack://daojia/./src/views/home/Docker.vue?8a98","webpack://daojia/./src/views/orderList/OrderList.vue","webpack://daojia/./src/views/orderList/OrderList.vue?8702"],"sourcesContent":["<template>\r\n    <div class=\"docker\">\r\n    <span class=\"docker__item\" v-for=\"(item,index) in dockerList\"  \r\n    :class=\"{'docker__item': true, 'docker__item--active': index === currentIndex}\"\r\n    :key='item.icon'>\r\n      <router-link :to=\"item.to\">\r\n        <div class=\"iconfont\" v-html=\"item.icon\"></div>\r\n        <div class=\"docker__title\">{{item.text}}</div>\r\n      </router-link>\r\n      </span>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name:'Docker',\r\n    props:['currentIndex'],\r\n    setup(){\r\n        const dockerList=[\r\n            {icon:'&#xe7c6;',text:'首页',to:{name:'Home'}},\r\n            {icon:'&#xe600;',text:'购物车',to:{name:'CartList'}},\r\n            {icon:'&#xe601;',text:'订单',to:{name:'OrderList'}},\r\n            {icon:'&#xe8a0;',text:'我的',to:{name:'Myself'}},\r\n        ];\r\n        return { dockerList }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '../../style/viriables.scss';\r\n@import '../../style/mixins.scss';\r\n\r\n.docker{\r\n  display: flex;\r\n  position:absolute;\r\n  left:0;\r\n  bottom:0;\r\n  height:0.49rem;\r\n  width:100%;\r\n  border-top:.01rem solid #f1f1f1 ;\r\n  padding:0 .18rem;\r\n  box-sizing: border-box;\r\n  color:$content-fontcolor;\r\n  a{\r\n    color:$content-fontcolor;\r\n    text-decoration: none;\r\n  }\r\n  &__item{\r\n      flex:1;\r\n      text-align: center;\r\n      font-size:.18rem;\r\n      margin: .07rem 0 .02rem 0;\r\n      &--active{\r\n        a{\r\n          color: #1fa4fc;\r\n        }\r\n      }\r\n  }\r\n  &__title{\r\n    font-size: .2rem;\r\n    transform: scale(.5,.5);\r\n    transform-origin: center top;\r\n  }\r\n}\r\n</style>","import { render } from \"./Docker.vue?vue&type=template&id=67305b38&scoped=true\"\nimport script from \"./Docker.vue?vue&type=script&lang=js\"\nexport * from \"./Docker.vue?vue&type=script&lang=js\"\n\nimport \"./Docker.vue?vue&type=style&index=0&id=67305b38&lang=scss&scoped=true\"\n\nimport exportComponent from \"E:\\\\慕课\\\\Vue3\\\\daojia\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-67305b38\"]])\n\nexport default __exports__","<template>\r\n    <div class=\"wrapper\">\r\n    <div class=\"title\">我的订单</div>\r\n    <div class=\"orders\">\r\n      <div class=\"order\" v-for=\"(item,index) in list\" :key=\"index\">\r\n        <div class=\"order__title\">\r\n          {{item.shopName}}\r\n          <span class=\"order__status\">{{item.isCanceled?'已取消':'已下单'}}</span>\r\n        </div>\r\n        <div class=\"order__content\">\r\n          <div class=\"order__content_imgs\">\r\n            <template v-for=\"(inneritem,innerindex) in item.products\" :key=\"innerindex\">\r\n                 <img class=\"order__content__img\" :src=\"inneritem.product.img\" v-if=\"innerindex<=3\"/> \r\n            </template>\r\n          </div>\r\n          <div class=\"order__info\">\r\n            <div class=\"order__info__price\">￥{{item.products.totalprice}}</div>\r\n            <div class=\"order__info__count\">共{{item.products.totalcount}}件</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <Docker :currentIndex=\"2\"/>\r\n</template>\r\n<script>\r\nimport Docker from '../home/Docker.vue'\r\nimport {get} from '../../utils/request'\r\nimport { reactive, toRefs } from '@vue/reactivity'\r\n\r\nconst useOrderListEffect=()=>{\r\n const data=reactive({list:{}})\r\n        const getNearbyList=async()=>{\r\n            const result=await get('/api/order')\r\n            if(result?.errno===0&&result?.data?.length)\r\n            {\r\n                const orderList=result.data;\r\n                for(let i in orderList)\r\n                {\r\n                    //products代表每一家商店\r\n                    const products=orderList[i].products||[];\r\n                    let totalprice=0;\r\n                    let totalcount=0;\r\n                    for(let j in products)\r\n                    {\r\n                        totalcount+=(products[j]?.orderSales||0)\r\n                        totalprice+=((products[j]?.product?.price*products[j]?.orderSales)||0)\r\n                    }\r\n                    products.totalprice=totalprice;\r\n                    products.totalcount=totalcount;\r\n                }\r\n                data.list=result.data;\r\n            }\r\n        }\r\n        getNearbyList();\r\n        const {list}=toRefs(data);\r\n        return { list }\r\n}\r\nexport default {\r\n  components: { Docker },\r\n    name:'OrderList',\r\n    setup(){\r\n       const {list} =useOrderListEffect()\r\n       console.log(list)\r\n       return {list}\r\n    }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n@import '../../style/viriables.scss';\r\n.wrapper {\r\n  overflow-y: auto;\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n  bottom: .5rem;\r\n  right: 0;\r\n  background: rgb(248, 248,248);\r\n}\r\n.title {\r\n  line-height: .44rem;\r\n  background: $bgColor;\r\n  font-size: .16rem;\r\n  font-weight:600;\r\n  color: $content-fontcolor;\r\n  text-align: center;\r\n}\r\n.order {\r\n  margin: .16rem .18rem;\r\n  padding: .16rem;\r\n  background: $bgColor;\r\n  &__title {\r\n    margin-bottom: .16rem;\r\n    line-height: .22rem;\r\n    font-size: .16rem;\r\n    color: $content-fontcolor;\r\n    font-weight: 600;\r\n  }\r\n  &__status {\r\n    float: right;\r\n    font-size: .14rem;\r\n    color: $light-fontColor;\r\n  }\r\n  &__content {\r\n    display: flex;\r\n    &__imgs {\r\n      flex: 1;\r\n    }\r\n    &__img {\r\n      width: .4rem;\r\n      height: .4rem;\r\n      margin-right: .12rem;\r\n    }\r\n  }\r\n  &__info {\r\n      width: .7rem;\r\n      position: absolute;\r\n      right:.35rem;\r\n        &__price {\r\n        margin-bottom: .04rem;\r\n        line-height: .2rem;\r\n        font-size: .14rem;\r\n        color: $hightight0fontColor;\r\n        text-align: right;\r\n            }\r\n        &__count {\r\n        line-height: .14rem;\r\n        font-size: .12rem;\r\n        color: $content-fontcolor;\r\n        text-align: right;\r\n        }\r\n    }\r\n}\r\n</style>","import { render } from \"./OrderList.vue?vue&type=template&id=42b49819&scoped=true\"\nimport script from \"./OrderList.vue?vue&type=script&lang=js\"\nexport * from \"./OrderList.vue?vue&type=script&lang=js\"\n\nimport \"./OrderList.vue?vue&type=style&index=0&id=42b49819&lang=scss&scoped=true\"\n\nimport exportComponent from \"E:\\\\慕课\\\\Vue3\\\\daojia\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-42b49819\"]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_Fragment","_renderList","$setup","item","index","$props","key","icon","_createVNode","_component_router_link","to","_createElementVNode","innerHTML","_toDisplayString","text","name","props","setup","dockerList","__exports__","render","_hoisted_2","shopName","isCanceled","products","inneritem","innerindex","src","product","img","totalprice","totalcount","_component_Docker","currentIndex","useOrderListEffect","data","reactive","list","getNearbyList","async","result","get","errno","length","orderList","i","j","orderSales","price","toRefs","components","Docker","console","log"],"sourceRoot":""}